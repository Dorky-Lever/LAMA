<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>Main config file</title>
	<meta name="generator" content="Zim 0.65">
	<meta name="viewport" content="width=device-width">
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:300&subset=latin,greek,latin-ext' rel='stylesheet' type='text/css'> -->
	<![if !IE]>
	<!-- comment out for IE since it spams the user with warnings -->
	<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
	<script type='text/javascript'>
		$(window).load(function(){$("#navigation").height( $("#content").height()+65 );});
	</script>
	<![endif]>
	<style>
		body, html {
			height:100%;
			font-family:'Open Sans', sans-serif;
			line-height:1.5em;
			font-weight:300;
			background-color:#FAFAFA;
			text-rendering:geometricPrecision;
			margin:0;
			padding:0;
		}
		.wrapper {
			height:100%;
			position:relative;
		}
		#navigation {
			background-color:#F3F3F3;
			display:inline-block;
			border-right:1px solid #EAEAEA;
			padding-right:65px;
			padding-top:65px;
			padding-left:25px;
			position:relative;
			float:left;
			min-height:100%;
		}
		#content {
			float:left;
			display:inline-block;
			position:absolute;
			max-width:960px;
			padding:65px;
		}
		#navigation ul {
			margin-top:0;
			margin-bottom:0;
			padding-left:40px;
		}
		#navigation li {
			list-style-type:none;
		}
		#navigation a {
			text-decoration:none;
			color:gray;
		}
		#navigation strong {
			color:#4E9A06;
			font-weight:400;
		}
		#navigation a:hover {
			text-decoration:underline;
		}
		#content h1:nth-child(1) {
			margin-top:0;
		}
		h1,h2,h3,h4,h5,h6 {
			color:#4E9A06;
			font-weight:300;
			margin-bottom: 0;
		}
		p {
			margin-top: 0;
		}
		#content a {
			color:#CE5C00;
		}
		#content a {
			text-decoration: none;
		}
		#content a:hover {
			text-decoration: underline;
		}
		#content a:active {
			text-decoration: underline;
		}
		#content strike {
			color: grey;
		}
		#content u {
			text-decoration: none;
			background-color: yellow;
		}
		#content tt {
			color: #2e3436;
		}
		#content pre {
			color: #2e3436;
			margin-left: 20px;
		}
		.backlinks {
			color:gray;
		}
		hr.footnotes {
			width: 20%;
			margin-left: 0;
		}
		@media print{
			#navigation{
				background-color:#FFF;
			}
		}

		span.zim-tag {
			color: #ce5c00;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}

		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */

	</style>
</head>

<body>
	<div class="wrapper">
		<div id="navigation"> <ul>
<li><a href="file:///home/neil/git/lama/docs/LAMA_documentation.html" title="LAMA documentation" class="page">LAMA documentation</a>
<ul>
<li><a href="../Config_files.html" title="Config files" class="page">Config files</a>
<ul>
<li><b>Main config file</b></li>
</ul>
</li>
<li><a href="../Creating_a_population_average.html" title="Creating a population average" class="page">Creating a population average</a></li>
<li><a href="../Extracting_full_resolution_rois.html" title="Extracting full resolution rois" class="page">Extracting full resolution rois</a></li>
<li><a href="../Getting_started.html" title="Getting started" class="page">Getting started</a></li>
<li><a href="../Known_issues_-_furure_plans.html" title="Known issues - furure plans" class="page">Known issues - furure plans</a></li>
<li><a href="../Quick_start.html" title="Quick start" class="page">Quick start</a></li>
<li><a href="../Running_phenotype_detection.html" title="Running phenotype detection" class="page">Running phenotype detection</a></li>
<li><a href="../Scheduling_jobs.html" title="Scheduling jobs" class="page">Scheduling jobs</a></li>
<li><a href="../Statistics.html" title="Statistics" class="page">Statistics</a></li>
<li><a href="../Trouble_shooting.html" title="Trouble shooting" class="page">Trouble shooting</a></li>
<li><a href="../visualising_results.html" title="visualising results" class="page">visualising results</a></li>
<li><a href="../Workflow.html" title="Workflow" class="page">Workflow</a></li>
</ul></li>
</ul>
 </div>
		<div id="content">
			<h1>Main config file <a name='LAMA documentation:Config files:Main config file'></a></h1>

			<p>
Created Thursday 28 January 2016
</p>

<p>
The main config file is used for running lama from start to scratch<br>
Some full example files to get started with can be found in LAMA/example_config_files
</p>

<h2>Main section</h2>

<p>
This section, located at the top of the file, describes the paths to the data, how to pad the data and various other options.
</p>

<div class="zim-object">
<pre class="brush: python;">
1&nbsp;---
2&nbsp;############################ Config file v1 for the MRC Harwell Registration pipeline###############
3&nbsp;## This file is in YAML format - http://www.yaml.org/                                             ##
4&nbsp;## Use spaces for indentations. Do not use tabs. It helps to edit in an IDE such as PyCharm                        						  ##
5&nbsp;##'true' and 'false' must be quoted within elastix param sections or python interperets them as 'True' and 'False'   		##
6&nbsp;#################################################################################
7&nbsp;
8&nbsp;inputvolumes_dir: inputs
9&nbsp;
10&nbsp;# The Fixed volume
11&nbsp;fixed_volume: target/301015_deformable_to_8_rescaled_8bit.nrrd
12&nbsp;fixed_mask: target/mask_cleaned.nrrd
13&nbsp;label_map_path: target/seg_cleaned.nrrd
14&nbsp;organ_names: organ_names.txt
15&nbsp;
16&nbsp;# Pad the volumes to the size of the largest. Options (true/dimensions to pad to in x, y, z - eg [300,256,240])
17&nbsp;pad_dims: [210, 275, 404]
18&nbsp;
19&nbsp;# Number of cpu cores to use
20&nbsp;threads: 30
21&nbsp;
22&nbsp;# true for creating an average. false for phenotype detection Options (true/false)
23&nbsp;generate_new_target_each_stage: false
24&nbsp;
25&nbsp;# normalise final output to a region [x,y,z], [x, y, z]
26&nbsp;normalisation_roi: [[35, 200, 130], [45, 210, 140]]
27&nbsp;
28&nbsp;generate_deformation_fields: 
29&nbsp;    full: [deformable_128_to_8)
30&nbsp;    coarse: [deformable_128_to_8, 2, 3, 4, 5]
31&nbsp;    fine: [deformable_128_to_8, 4, 5]
</pre>
</div>

<br>

<p>
<b>inputs</b><br>
Required: false (if not present, LAMA will look for a folder named 'inputs' in the project directory)<br>
Can either be a path to a folder containg input volumes
</p>

<p>
Or a path to a text file containing paths to images. this is useful if you want to use only a subset of images in a folder<br>
An example inputs file:
</p>

<pre>
path_to_images_dir
img1.nrrd
img2.nrrd
img3.nrrd

</pre>
<p>
note: The path/to_images_dir should be relative to the config folder
</p>

<p>
<b>pad_dims</b><br>
Required:  false
</p>

<p>
If set to <tt>true</tt>, the input images, target, mask, and labelmap will be zero-padded such that each dimension equals the size of the largest correspoding dimension of the input images or target
</p>

<p>
Or to set to a predefined size , add the required x,y,z dimensions as bellow<br>
example:   pad_dims: [300,200,180] 
</p>

<p>
<b>threads</b><br>
Required: false<br>
The number of cpu threads to use for the elastix registration<br>
Default: use all available threads
</p>

<p>
<b>skip_transform_inversion</b><br>
if transform inversion is not needed, set to true<br>
Default: false
</p>

<p>
<b>no_qc</b><br>
If set to true, no qc output images will be created, which can speed things up a bit.<br>
required: false<br>
deafult: false
</p>

<p>
<b>generate_new_target_each_stage</b><br>
Required: true<br>
for poulation average creation set to t<tt>rue</tt>.<br>
For phenotype detection, set to f<tt>alse</tt> 
</p>

<h4>normalisation_roi:</h4>

<p>
required: false<br>
A region of interest from which to noramlise the images to after registration.<br>
The grand mean of all the samples' rois is generated and the intensity of each image is linearly shifted so that the mean intensity of each sample's roi is the same<br>
This helps to account for global differences in intensity between the input images <br>
We tend to use a brain region that shows consistent intensity amongst images. If your mutants have obvious brain defects then another region should be chosen. If the intesity profiles of your images a very similar, then this option can be ommited. <br>
Example [[<a href="./35,_200,_130],_[45,_210,_140.html" title="35, 200, 130], [45, 210, 140" class="page">35, 200, 130], [45, 210, 140</a>]] . The first list defines the start of the ROI x, y, z coordinates. The second list defines the roi end coordinates
</p>

<p>
<b>generate_deformation_fields</b><br>
required: false (No deformation fields will be generated if set to <tt>false </tt>or is absent<tt>)</tt>
</p>

<p>
This option defines how deformation fields and associated spatial jacobians are generated.<br>
Generating jacobians from the early stages of registration can give information on large scale differences between controls and mutants<br>
Generating jacobians from later stages of registration, after large scale differences have been accounted for can uncover more subtle differences. 
</p>

<p>
The following entry in the config file would generate three sets of deformation fields and jacobians. <br>
These would be:
</p>

<pre>
generate_deformation_fields: 
    full: [deformable_128_to_8)
    coarse: [deformable_128_to_8, 2, 3, 4, 5]
    fine: [deformable_128_to_8, 4, 5]

</pre>
<p>
<ul>
<li>full - The whole deformable (non-linear) stage</li>
<li>coarse- The inital deformable stages (obtaining course differences)</li>
<li>fine- The final deformable stages (obtaining subtle differences) </li>
</ul>
</p>

<p>
The numbers specified after the registration stage are the resolutions to aquire deformations and jacobians from<br>
So for example if we had a registration pyramid with a grid spacing half the size of the previous and a final grid spacing of 8, the 'coarse' entry would generate data from the the resolutions with the following grid spacing: [64, 32, 16, 8]
</p>

<p>
Statistical analysis will be applied to data generated from each entry
</p>

<p>
<b>skip_transform_inversion:</b><br>
required: false<br>
default: true<br>
Inversion of the elastix parameter files can sometimes take a significant amount of time.<br>
If you do not need inverted label maps or inverted stats overlays you can set this to true. Otherwise set to false, or exlude from the file
</p>

<h2>Global registration parameters section</h2>

<p>
Parameters here are applied to all stages of registration <br>
See the <a href="http://elastix.isi.uu.nl/doxygen/index.html" title="elastix documentation" class="http">elastix documentation</a> for avaiable parameters 
</p>

<div class="zim-object">
<pre class="brush: python;">
1&nbsp;################################### Global registration parameters, applied to all stages ##############################
2&nbsp;global_elastix_params:
3&nbsp;	FixedInternalImagePixelType: short
4&nbsp;	MovingInternalImagePixelType: short
5&nbsp;	FixedImageDimension: 3
6&nbsp;	MovingImageDimension: 3
7&nbsp;	UseDirectionCosines: 'true'
8&nbsp;	FixedImagePyramid: FixedSmoothingImagePyramid
9&nbsp;	MovingImagePyramid: MovingSmoothingImagePyramid
10&nbsp;	ResultImagePixelType: float
11&nbsp;	ResultImageFormat: nrrd
12&nbsp;	CompressResultImage: 'true'
13&nbsp;	Interpolator: BSplineInterpolator
14&nbsp;	ResampleInterpolator: FinalBSplineInterpolator
15&nbsp;	Resampler: DefaultResampler
16&nbsp;	NumberOfHistogramBins: 32
17&nbsp;	HowToCombineTransforms: Compose
18&nbsp;	NewSamplesEveryIteration: 'true'
19&nbsp;	ImageSampler: RandomCoordinate
20&nbsp;	FinalBSplineInterpolationOrder: 3
21&nbsp;	DefaultPixelValue: 0
22&nbsp;	WriteTransformParametersEachIteration: 'false'
23&nbsp;	WriteResultImage: 'true'
24&nbsp;	AutomaticScalesEstimation: 'true'
25&nbsp;	AutomaticTransformInitialization: 'true'
26&nbsp;
</pre>
</div>

<br>
<br>

<h2>Registration schedule section</h2>

<p>
Each registration stage is defined by a  <tt>- stage_id: stage name </tt>section
</p>

<p>
The following schedule defines a multistep registration with:<br>
<ul>
<li>rigid</li>
<li>affine</li>
<li>deformable (5 resolutions)</li>
</ul>
</p>

<p>
<tt>inherit_elx_params: name_of_stage</tt><br>
Will make that stage inherit parameters from anaither previos stage. Any parameter specified in the new stage will overide the inherited paramters.
</p>

<div class="zim-object">
<pre class="brush: python;">
1&nbsp;################################ Stage-specific registration parameters ################################################
2&nbsp;registration_stage_params:
3&nbsp;
4&nbsp;#### Rigid #############################################################################################################
5&nbsp;    
6&nbsp;	- stage_id: rigid
7&nbsp;	  elastix_parameters:
8&nbsp;		Metric: AdvancedNormalizedCorrelation
9&nbsp;		Registration: MultiResolutionRegistration
10&nbsp;		MaximumNumberOfIterations: 600
11&nbsp;		NumberOfResolutions: 1
12&nbsp;		NumberOfSpatialSamples: 20000
13&nbsp;		FixedKernelBSplineOrder: 1
14&nbsp;		MovingKernelBSplineOrder: 3
15&nbsp;		Transform: EulerTransform
16&nbsp;		Optimizer: AdaptiveStochasticGradientDescent
17&nbsp;		Metric: AdvancedNormalizedCorrelation
18&nbsp;		SP_a: [1000.0, 1000.0, 500.0, 500.0]
19&nbsp;		SP_alpha: 0.602
20&nbsp;		SP_A: 50.0
21&nbsp;		FixedLimitRangeRatio: 0.0
22&nbsp;		MovingLimitRangeRatio: 0.0
23&nbsp;		FixedKernelBSplineOrder: 1
24&nbsp;		MovingKernelBSplineOrder: 3
25&nbsp;		UseDifferentiableOverlap: 'false'
26&nbsp;        
27&nbsp;
28&nbsp; #### Affine #############################################################################################################
29&nbsp;
30&nbsp;	- stage_id: affine
31&nbsp;	  elastix_parameters:
32&nbsp;		MaximumNumberOfIterations: 600
33&nbsp;		Registration: MultiResolutionRegistration
34&nbsp;		NumberOfResolutions: 1
35&nbsp;		Optimizer: AdaptiveStochasticGradientDescent
36&nbsp;		Transform: AffineTransform
37&nbsp;		Metric: AdvancedNormalizedCorrelation
38&nbsp;		NumberOfSpatialSamples: 20000
39&nbsp;
40&nbsp;
41&nbsp;#### Deformable registrations. Generate deformation fields etc #################################
42&nbsp;    
43&nbsp;	- stage_id: deformable_128_to_8
44&nbsp;	  elastix_parameters:
45&nbsp;		Registration: MultiResolutionRegistration
46&nbsp;		NumberOfResolutions: 1
47&nbsp;		NumberOfSpatialSamples: 20000
48&nbsp;		NumberOfGradientMeasurements: 10
49&nbsp;		NumberOfSamplesForExactGradient: 20000
50&nbsp;		NumberOfJacobianMeasurements: 4000
51&nbsp;		MaximumNumberOfIterations: 150
52&nbsp;		AutomaticParameterEstimation: 'true'
53&nbsp;		UseAdaptiveStepSizes: 'true'
54&nbsp;		ASGDParameterEstimationMethod: DisplacementDistribution
55&nbsp;		Optimizer: AdaptiveStochasticGradientDescent
56&nbsp;		Transform: BSplineTransform
57&nbsp;		Metric: AdvancedMattesMutualInformation
58&nbsp;		FinalGridSpacingInVoxels: 128
59&nbsp;		MaximumStepLength: 2.0
60&nbsp;
61&nbsp;	- stage_id: deformable_64
62&nbsp;	  inherit_elx_params: deformable_to_128
63&nbsp;	  elastix_parameters:
64&nbsp;		MaximumNumberOfIterations: 150
65&nbsp;		FinalGridSpacingInVoxels: 64
66&nbsp;		MaximumStepLength: 2.0
67&nbsp;
68&nbsp;	- stage_id: deformable_32
69&nbsp;	  inherit_elx_params: deformable_to_64
70&nbsp;	  elastix_parameters:
71&nbsp;		MaximumNumberOfIterations: 150
72&nbsp;		FinalGridSpacingInVoxels: 32
73&nbsp;		MaximumStepLength: 2.0
74&nbsp;
75&nbsp;	- stage_id: deformable_16
76&nbsp;	  inherit_elx_params: deformable_to_32
77&nbsp;	  elastix_parameters:
78&nbsp;		Registration: MultiMetricMultiResolutionRegistration
79&nbsp;		Metric: [AdvancedMattesMutualInformation, TransformRigidityPenalty]
80&nbsp;		NumberOfResolutions: 1
81&nbsp;		FinalGridSpacingInVoxels: 16
82&nbsp;		MaximumStepLength: 1.0
83&nbsp;		RigidityPenaltyWeight: 0.1
84&nbsp;
85&nbsp;	- stage_id: deformable_8
86&nbsp;	  inherit_elx_params: deformable_to_16
87&nbsp;	  elastix_parameters:
88&nbsp;		FinalGridSpacingInVoxels: 8
89&nbsp;		MaximumStepLength: 1.0
90&nbsp;		RigidityPenaltyWeight: 0.1</pre>
</div>



			<br>
			<span class="backlinks">
				<hr class='footnotes'>
				<b>Backlinks:</b>
				<a href='file:///home/neil/git/lama/docs/LAMA_documentation.html'>LAMA documentation</a>
				
				<a href='../Trouble_shooting.html'>LAMA documentation:Trouble shooting</a>
				
				<a href='../Creating_a_population_average.html'>LAMA documentation:Creating a population average</a>
				
				<a href='../Config_files.html'>LAMA documentation:Config files</a>
				<br /><br />
			</span>

			
		</div>
	</div>
</body>
</html>

